appId: com.sergical.skipline
---
- launchApp
- waitForAnimationToEnd

# Wait for products to load
- assertVisible: 
    text: 'Home'
    timeout: 10000
- waitForAnimationToEnd

# Wait for at least one product to be visible
- assertVisible:
    text: '.*\$[0-9]+\.[0-9]{2}'  # Price regex
    timeout: 10000

# Add multiple products to cart
# Method 1: Try using testID (most reliable)
- tapOn:
    id: "add-to-cart-1"
    optional: true
- tapOn:
    id: "add-to-cart-2"
    optional: true
    
# Method 2: Fallback to accessibility label
- runFlow:
    when:
      notVisible: 
        id: "cart-badge"
    commands:
      - tapOn:
          text: ".*Add.*Wireless Earbuds.*"
          optional: true
      - tapOn:
          text: ".*Add.*Smart Watch.*"
          optional: true
          
# Method 3: Final fallback - tap in button area
- runFlow:
    when:
      notVisible:
        id: "cart-badge"
    commands:
      # Tap where first Add button should be (right side of first product)
      - tapOn:
          point: "85%, 26%"
      # Tap where second Add button should be  
      - tapOn:
          point: "85%, 50%"

# Go to checkout
- tapOn: 
    id: 'cart-button'
- assertVisible: 'Checkout'
- assertVisible: 'Order Summary'

# Enter coupon code
- tapOn: 'Enter code (try SAVE10)'
- inputText: 'SAVE10'

# Place order
- scrollUntilVisible:
    element: 'Place Order'
    direction: DOWN
- tapOn: 'Place Order'

# Verify order confirmation
- waitForAnimationToEnd
- assertVisible: 'Thank You!'
- assertVisible: 'Your order has been confirmed'
- assertVisible: 'Continue Shopping'

