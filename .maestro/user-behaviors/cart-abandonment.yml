appId: com.sergical.skipline
name: Cart Abandonment - Add Items but Don't Purchase
tags:
  - user-behavior
  - abandonment
  - sentry-data
---
- launchApp
- waitForAnimationToEnd

# Wait for products
- extendedWaitUntil:
    visible: 'Home'
    timeout: 10000

# Add multiple items enthusiastically
- tapOn:
    id: "add-to-cart-1"

- tapOn:
    id: "add-to-cart-2"

# Scroll and add more
- swipe:
    direction: DOWN
    duration: 800

- tapOn:
    id: "add-to-cart-4"
    optional: true

- tapOn:
    id: "add-to-cart-5"
    optional: true

# Go to checkout
- tapOn:
    id: "cart-button"
- waitForAnimationToEnd

# Look at checkout page
- assertVisible: "Checkout"

# Scroll to see total
- scrollUntilVisible:
    element: "Place Order"
    direction: DOWN
    timeout: 5000

# Try coupon
- scrollUntilVisible:
    element: "Enter code"
    direction: UP
    timeout: 5000
- tapOn: "Enter code (try SAVE10)"
- inputText: "DISCOUNT"  # Wrong code

# Abandon cart - go back
- tapOn: "Home"
- waitForAnimationToEnd

# Browse a bit more then leave
- swipe:
    direction: DOWN
    duration: 1000

- pressKey: Home
